<!DOCTYPE html>
<html lang="zh-cn">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>数字IC设计全流程 - Varyan.Z</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="" /><meta name="description" content="数字IC" />






<meta name="generator" content="Hugo 0.153.3 with theme even" />


<link rel="canonical" href="http://localhost:1313/post/the-whole-process-of-digital-ic-design-z1pdizu.html" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.af7fd1da18d66c2b017df5b4cae508ef44cfcac3fb4c7c7a327fe4f4f9e28b08.css" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">


<meta property="og:url" content="http://localhost:1313/post/the-whole-process-of-digital-ic-design-z1pdizu.html">
  <meta property="og:site_name" content="Varyan.Z">
  <meta property="og:title" content="数字IC设计全流程">
  <meta property="og:description" content="数字IC">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2025-12-08T14:37:29+08:00">
    <meta property="article:modified_time" content="2025-12-28T14:02:13+08:00">

  <meta itemprop="name" content="数字IC设计全流程">
  <meta itemprop="description" content="数字IC">
  <meta itemprop="datePublished" content="2025-12-08T14:37:29+08:00">
  <meta itemprop="dateModified" content="2025-12-28T14:02:13+08:00">
  <meta itemprop="wordCount" content="10436">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="数字IC设计全流程">
  <meta name="twitter:description" content="数字IC">

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Varyan.z</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">首页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">分类</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">关于</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Varyan.z</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">首页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">分类</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">关于</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">数字IC设计全流程</h1>

      <div class="post-meta">
        <span class="post-time"> 2025-12-08 </span>
        
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#-总流程图-the-grand-map">🚀 总流程图 (The Grand Map)</a></li>
        <li><a href="#-一步步详细拆解">👣 一步步详细拆解</a></li>
        <li><a href="#-关键文件的接力棒">📂 关键文件的“接力棒”</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#1-网表在哪里生成-where">1. 网表在哪里生成？ (Where)</a></li>
        <li><a href="#2-网表的格式是怎样的-format">2. 网表的格式是怎样的？ (Format)</a></li>
        <li><a href="#3-如何检查网表是否正确">3. 如何检查网表是否正确？</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#-关于-fatal-error-loading-environment-variables">. 关于 &ldquo;Fatal: Error loading environment variables&hellip;&rdquo;</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#第一步点进这个文件夹看看">第一步：点进这个文件夹看看</a></li>
        <li><a href="#第二步确认文件路径windows-vs-linux">第二步：确认文件路径（Windows vs Linux）</a></li>
        <li><a href="#第三步在-ade-中加载正确的文件">第三步：在 ADE 中加载正确的文件</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#1-能替代-modelsim-的数字仿真工具">1. 能替代 ModelSim 的数字仿真工具</a></li>
        <li><a href="#2-虚拟机内其他工具详细介绍">2. 虚拟机内其他工具详细介绍</a></li>
        <li><a href="#总结">总结</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#第一步确认-linux-路径">第一步：确认 Linux 路径</a></li>
        <li><a href="#第二步在-library-manager-中添加库">第二步：在 Library Manager 中添加库</a></li>
        <li><a href="#第三步验证库是否有效">第三步：验证库是否有效</a></li>
        <li><a href="#第四步回到-verilog-in-界面-解决你的最初问题">第四步：回到 Verilog In 界面 (解决你的最初问题)</a></li>
        <li><a href="#plan-b如果直接挂载全是空的-使用-gds-导入">Plan B：如果直接挂载全是空的 (使用 GDS 导入)</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#-解决方案换个地方运行命令">✅ 解决方案：换个地方运行命令</a></li>
        <li><a href="#-最后一步重新导入网表-verilog-in">🚀 最后一步：重新导入网表 (Verilog In)</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#第一步准备文件-在-dc-中生成">第一步：准备文件 (在 DC 中生成)</a></li>
        <li><a href="#第二步修改-testbench-测试平台">第二步：修改 Testbench (测试平台)</a></li>
        <li><a href="#第三步运行-vcs-仿真-核心步骤">第三步：运行 VCS 仿真 (核心步骤)</a></li>
        <li><a href="#第四步使用-verdi-查看波形">第四步：使用 Verdi 查看波形</a></li>
        <li><a href="#总结-1">总结</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#1-runtcl--总指挥-flow-script">1. <code>run.tcl</code> —— 总指挥 (Flow Script)</a></li>
        <li><a href="#2-lab4con--规则书-constraints-file">2. <code>lab4.con</code> —— 规则书 (Constraints File)</a></li>
        <li><a href="#3-lab4wscr--现场记录-write-script--echo-script">3. <code>lab4.wscr</code> —— 现场记录 (Write Script / Echo Script)</a></li>
        <li><a href="#总结你的-32-位乘法器该怎么用这三个文件">总结：你的 32 位乘法器该怎么用这三个文件？</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h1 id="数字ic设计全流程">数字IC设计全流程</h1>
<p>DC运行流程<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<p>DC-verdi-vcs-DVE</p>
<p>DC验证流程<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup></p>
<p>‍</p>
<p>DC修改<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup></p>
<p>‍</p>
<p>virtuoso加电源<sup id="fnref:4"><a href="#fn:4" class="footnote-ref" role="doc-noteref">4</a></sup></p>
<p>‍</p>
<p>‍</p>
<p>好的，我们把复杂的IC设计流程简化成一条清晰的“生产线”。</p>
<p>这是一个从  <strong>“代码概念”</strong>  到  <strong>“物理电路”</strong>  的转化过程。</p>
<h3 id="-总流程图-the-grand-map">🚀 总流程图 (The Grand Map)</h3>
<p>编写代码 (Verilog)</p>
<p>⬇️</p>
<p>逻辑综合 (Design Compiler) $\rightarrow$ 生成门级网表 (Netlist)</p>
<p>⬇️</p>
<p>时序验证 (Modelsim) $\rightarrow$ 确保逻辑对，延迟没问题</p>
<p>⬇️</p>
<p>电路生成 (Virtuoso) $\rightarrow$ 将网表自动转为原理图</p>
<p>⬇️</p>
<p>模拟仿真 (Spectre) $\rightarrow$ 看真实电压波形和延迟</p>
<hr>
<h3 id="-一步步详细拆解">👣 一步步详细拆解</h3>
<p>我们要像这就开始第一步。</p>
<h4 id="第一阶段逻辑设计-前端">第一阶段：逻辑设计 (前端)</h4>
<p><strong>1. 写代码 (RTL Design)</strong></p>
<ul>
<li><strong>做什么：</strong>  打开文本编辑器，用 Verilog 写下 <code>A * B</code> 的公式。</li>
<li><strong>输入：</strong>  你的大脑。</li>
<li><strong>输出：</strong>  <code>mult32.v</code> (源代码)。</li>
</ul>
<p><strong>2. 变电路 (Synthesis with DC)</strong></p>
<ul>
<li>
<p><strong>做什么：</strong>  把你的代码扔进 ​<strong>Design Compiler</strong>。告诉它：“用 SMIC 180nm 的工艺，给我造一个最快的乘法器！”</p>
</li>
<li>
<p><strong>发生什么：</strong>  DC 会把你的 <code>*</code>​ 号变成几千个具体的 <code>AND</code>​、<code>XOR</code> 门电路。</p>
</li>
<li>
<p><strong>输出：</strong></p>
<ul>
<li>​<code>mult32_netlist.v</code>​ (​<strong>这是核心文件</strong>，全是门电路连接)。</li>
<li>​<code>mult32.sdf</code> (记录了每个门延迟了多少纳秒)。</li>
</ul>
</li>
</ul>
<p><strong>3. 查逻辑 (Modelsim Verification)</strong></p>
<ul>
<li><strong>做什么：</strong>  在 <strong>Modelsim</strong> 中，加载上面的网表和 SDF 文件。喂给它 <code>10 * -5</code>​，看输出是不是 <code>-50</code>。</li>
<li><strong>目的：</strong>  确保 DC 综合出来的电路功能没算错。</li>
</ul>
<h4 id="第二阶段电路实现-后端">第二阶段：电路实现 (后端)</h4>
<p><strong>4. 导电路 (Virtuoso Import)</strong></p>
<ul>
<li><strong>做什么：</strong>  打开 ​<strong>Virtuoso</strong>​，使用 <code>File -&gt; Import -&gt; Verilog</code> 功能。</li>
<li><strong>关键动作：</strong>  把 <code>mult32_netlist.v</code> 喂给 Virtuoso。</li>
<li><strong>结果：</strong>  屏幕上自动生成了一张巨大的原理图 (Schematic)，里面连好了几千根线。</li>
</ul>
<p><strong>5. 跑波形 (Spectre Simulation)</strong></p>
<ul>
<li><strong>做什么：</strong>  给这张原理图接上“虚拟电源(1.8V)”和“信号发生器”。</li>
<li><strong>看什么：</strong>  打开 <strong>ADE L</strong> 跑瞬态仿真。放大波形，看输出信号从 <code>0</code>​ 变成 <code>正确结果</code> 需要几纳秒 (这就是延时)。</li>
</ul>
<hr>
<h3 id="-关键文件的接力棒">📂 关键文件的“接力棒”</h3>
<p>这个流程最容易乱的是文件。请记住这个文件的传递链：</p>
<ol>
<li><strong>你</strong> 创造了 <code>mult32.v</code>。</li>
<li><strong>DC</strong> 读入 <code>mult32.v</code>​，产出 <code>mult32_netlist.v</code>​ 和 <code>.sdf</code>。</li>
<li><strong>Modelsim</strong> 吃掉 <code>mult32_netlist.v</code>​ + <code>.sdf</code> 来验证。</li>
<li><strong>Virtuoso</strong> 吃掉 <code>mult32_netlist.v</code> 来画图。</li>
</ol>
<hr>
<p><strong>准备好开始第一步了吗？</strong></p>
<p>我们需要先写好那个最基础的 ​<strong>Verilog 代码 (<strong>​</strong>​<code>mult32.v</code>​</strong>​ <strong>)</strong> 。你想直接要代码模板，还是我教你怎么写？</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<h1 id="dc运行流程">DC运行流程</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tcl" data-lang="tcl"><span class="line"><span class="cl"><span class="nv">dc_shell</span> <span class="o">-</span>f run_syn.tcl <span class="o">|</span> tee run_smic.log
</span></span></code></pre></td></tr></table>
</div>
</div><p>仿真配置<sup id="fnref:5"><a href="#fn:5" class="footnote-ref" role="doc-noteref">5</a></sup></p>
<p>总结配置<sup id="fnref:6"><a href="#fn:6" class="footnote-ref" role="doc-noteref">6</a></sup></p>
<p>‍</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tcl" data-lang="tcl"><span class="line"><span class="cl"><span class="nv">write</span> <span class="o">-</span>format verilog <span class="o">-</span>hierarchy <span class="o">-</span>output signed_vedic_mult_32bit_netlist.v
</span></span></code></pre></td></tr></table>
</div>
</div><p>VCS 仿真命令<sup id="fnref:7"><a href="#fn:7" class="footnote-ref" role="doc-noteref">7</a></sup></p>
<p>数字全流程虚拟机<sup id="fnref:8"><a href="#fn:8" class="footnote-ref" role="doc-noteref">8</a></sup></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tcl" data-lang="tcl"><span class="line"><span class="cl"><span class="c"># 1. 检查设计是否有逻辑问题
</span></span></span><span class="line"><span class="cl"><span class="nv">check_design</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># 2. (可选) 设置一个简单的时钟约束，防止DC随意优化
</span></span></span><span class="line"><span class="cl"><span class="c"># 假设你的时钟端口叫 clk，目标频率是 100MHz (10ns)
</span></span></span><span class="line"><span class="cl"><span class="nv">create_clock</span> <span class="o">-</span>period <span class="mi">10</span> <span class="k">[</span><span class="nv">get_ports</span> clk<span class="k">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># 3. 开始综合 (这是最关键的一步，把代码变成门电路)
</span></span></span><span class="line"><span class="cl"><span class="nv">compile</span> <span class="o">-</span>map_effort medium
</span></span><span class="line"><span class="cl"><span class="c"># 或者使用更强的优化命令: compile_ultra
</span></span></span><span class="line"><span class="cl"><span class="c">
</span></span></span><span class="line"><span class="cl"><span class="c"># 4. 修改命名规则 (非常重要！)
</span></span></span><span class="line"><span class="cl"><span class="c"># DC生成的网表里可能会有反斜杠 \ 或方括号 []，VCS有时不喜欢，需要改名
</span></span></span><span class="line"><span class="cl"><span class="nv">change_names</span> <span class="o">-</span>rules verilog <span class="o">-</span>hierarchy
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># 5. 导出门级网表 (Netlist) -&gt; 给 VCS 用
</span></span></span><span class="line"><span class="cl"><span class="nv">write</span> <span class="o">-</span>format verilog <span class="o">-</span>hierarchy <span class="o">-</span>output signed_vedic_mult_32bit_netlist.v
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># 6. 导出标准延时文件 (SDF) -&gt; 给 VCS 做时序仿真用
</span></span></span><span class="line"><span class="cl"><span class="nv">write_sdf</span> <span class="o">-</span>version <span class="mf">2.1</span> signed_vedic_mult_32bit.sdf
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># 7. 导出约束文件 (SDC) -&gt; 以后做布局布线 (P&amp;R) 用
</span></span></span><span class="line"><span class="cl"><span class="nv">write_sdc</span> signed_vedic_mult_32bit.sdc
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>
<p>read_file -format db /home/ic_libs/TSMC_013/synopsys/typical.db</p>
<ol>
<li>read_file -format db /home/ICer/project/synopsys/lib/tsmc018/osu018_stdcells.db</li>
</ol>
</li>
<li>
<p>list_libs</p>
</li>
<li>
<p>check_library</p>
</li>
<li>
<p>remove_design -designs</p>
</li>
</ol>
<p>‍</p>
<hr>
<p>这个库是后仿真用verilog库，dc综合后的网表仿真以及布局布线后网表仿真都用到它。一般随工艺库由foundry提供。举例来说，tower 0.18 工艺库，在主目录底下应该包含synopsys、astro等所用的库子目录。dc综合时用的工艺库应该包含在synopsys子目录下，同理，仿真用的verilog库应包含在名为verilog的子目录下，共包含2个文件，twr18.v 与 twr18_neg.v，其中后一个包含了负时序（- holdtiming）信息，但仿真速度较慢，一般不采用。在对综合或布局布线后网表进行仿真时将这个.v文件与所得的sdf或者spef文件一起载入仿真器仿真即可。当然，不同的foundry提供的工艺库目录结构可能略有不同，但基本上遵循上述的目录结构。楼主请到相应的库目录下查找一下即可。</p>
<hr>
<p>‍</p>
<p>‍</p>
<p>问题</p>
<ol>
<li>改变电压和输出芯片没变化，在亚阈值区</li>
<li>怎么用向量测试</li>
<li>我觉得还是先进行第二步，用modelsim看时序，写测试逻辑在所</li>
<li>如何把32位乘法器模块化设计的更好些</li>
</ol>
<p>‍</p>
<p>‍</p>
<p>‍</p>
<p>翻译加e入<sup id="fnref:9"><a href="#fn:9" class="footnote-ref" role="doc-noteref">9</a></sup></p>
<p>‍</p>
<p>转换库<sup id="fnref:10"><a href="#fn:10" class="footnote-ref" role="doc-noteref">10</a></sup></p>
<p><strong>网表 (Netlist)</strong>  是由 <strong>Design Compiler (DC)</strong>  在运行完 <code>compile</code> 命令之后生成的。</p>
<p>在你的脚本 <code>run.tcl</code>​ 中，它是由 <code>write</code> 这个命令产生的。</p>
<h3 id="1-网表在哪里生成-where">1. 网表在哪里生成？ (Where)</h3>
<p>在你提供的 run.tcl 文件末尾，有一行：</p>
<p>write -format ddc -hier -out unmapped/MY_DESIGN.ddc</p>
<p><strong>⚠️ 注意：</strong>  这行生成的是 <code>.ddc</code>​ 文件（二进制数据库），只能给 DC 自己读，<strong>Modelsim 和 Virtuoso 读不懂！</strong></p>
<p>你需要<strong>手动添加</strong>下面这一行命令到 <code>run.tcl</code>​ 的最后（在 <code>exit</code> 之前），才能生成通用的 Verilog 网表：</p>
<p>Tcl</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 必须添加这一行来生成 .v 文件
</span></span><span class="line"><span class="cl">write -format verilog -hierarchy -output mult32_netlist.v
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>生成的时机：</strong>  必须在 <code>compile</code>​ 命令<strong>之后</strong>执行。</li>
<li><strong>生成的位置：</strong>  会出现在你运行 DC 的当前文件夹下，名字叫 <code>mult32_netlist.v</code>。</li>
</ul>
<hr>
<h3 id="2-网表的格式是怎样的-format">2. 网表的格式是怎样的？ (Format)</h3>
<p>网表虽然也是 <code>.v</code>​ 文件，但它和你要自己写的 <code>mult32.v</code> 长得完全不一样。</p>
<ul>
<li><strong>你的代码 (RTL):</strong>  描述的是“功能” (人类能看懂)。</li>
<li><strong>网表 (Netlist):</strong>  描述的是“连接关系” (机器能看懂)。</li>
</ul>
<h4 id="举个例子对比">举个例子对比：</h4>
<p><strong>A. 你写的代码 (Behavioral RTL):</strong></p>
<p>Verilog</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">module mult32 (A, B, P);
</span></span><span class="line"><span class="cl">    input [31:0] A, B;
</span></span><span class="line"><span class="cl">    output [63:0] P;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    assign P = A * B;  // 一句话搞定
</span></span><span class="line"><span class="cl">endmodule
</span></span></code></pre></td></tr></table>
</div>
</div><p>B. DC 生成的网表 (Gate-level Netlist):</p>
<p>(这就是 mult32_netlist.v 里的内容，DC 把你的乘号打碎成了几千个门)</p>
<p>Verilog</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">module mult32 ( A, B, P );
</span></span><span class="line"><span class="cl">  input [31:0] A;
</span></span><span class="line"><span class="cl">  input [31:0] B;
</span></span><span class="line"><span class="cl">  output [63:0] P;
</span></span><span class="line"><span class="cl">      
</span></span><span class="line"><span class="cl">  // 1. 定义了一堆乱七八糟的中间连线
</span></span><span class="line"><span class="cl">  wire n1, n2, n3, n45, n_sys_12, net_334;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  // 2. 调用工艺库里的“标准单元” (Standard Cells)
</span></span><span class="line"><span class="cl">  // AND2X1, XOR2X1 这些名字来自你的 SMIC .18 库
</span></span><span class="line"><span class="cl">  AND2X1 U1 ( .A(A[0]), .B(B[0]), .Y(n1) );
</span></span><span class="line"><span class="cl">  AND2X1 U2 ( .A(A[1]), .B(B[0]), .Y(n2) );
</span></span><span class="line"><span class="cl">      
</span></span><span class="line"><span class="cl">  // 3. 具体的连接关系
</span></span><span class="line"><span class="cl">  XOR2X1 U3 ( .A(n1), .B(n_sys_12), .Y(P[0]) );
</span></span><span class="line"><span class="cl">  INVX1  U4 ( .A(n45), .Y(net_334) );
</span></span><span class="line"><span class="cl">      
</span></span><span class="line"><span class="cl">  // ... 下面还有几千行这样的东西 ...
</span></span><span class="line"><span class="cl">endmodule
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="3-如何检查网表是否正确">3. 如何检查网表是否正确？</h3>
<p>当你打开生成的 <code>mult32_netlist.v</code> 文件时：</p>
<ol>
<li><strong>看名字：</strong>  里面的模块名（比如 <code>AND2X1</code>​、<code>FAX1</code>​）必须是 <strong>SMIC .18 工艺库</strong>里的名字。如果看到 <code>GTECH_AND</code> 这种名字，说明综合没完全成功（没映射到具体工艺上）。</li>
<li><strong>看结构：</strong>  里面不应该再出现 <code>assign P = A * B;</code> 这种语句。</li>
<li><strong>看端口：</strong>  模块的输入输出端口（<code>A</code>​, <code>B</code>​, <code>P</code>）应该和你原始设计保持一致。</li>
</ol>
<p>下一步操作建议：</p>
<p>修改你的 run.tcl，加上 write -format verilog &hellip; 那行代码，重新运行一遍 DC，然后去文件夹里找生成的 .v 文件。</p>
<p>‍&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<h1 id="dc验证流程">DC验证流程</h1>
<p>做数字IC设计，DC综合后的验证通常被称为<strong>门级仿真 (Gate-Level Simulation, GLS)</strong>  或 ​<strong>后仿真 (Post-Sim)</strong> 。</p>
<p>它的目的是验证 DC 生成的“网表”是否与你原来的 RTL 功能一致，以及时序是否满足要求。</p>
<p>在这个虚拟机里，你主要使用 <strong>VCS</strong> (负责跑仿真) 和 <strong>Verdi</strong> (负责看波形)。以下是手把手的操作流程：</p>
<h3 id="第一步准备文件-在-dc-中生成">第一步：准备文件 (在 DC 中生成)</h3>
<p>在 DC (Design Compiler) 中综合完成后，你必须保存两个关键文件，否则无法进行后续验证：</p>
<ol>
<li><strong>门级网表 (.v):</strong>  这是把你的代码变成了用 TSMC 库里的 AND, OR, XOR 门连接的电路。</li>
<li><strong>标准延时文件 (.sdf):</strong>  (可选，做带时序的后仿需要) 包含了每个门的真实延迟信息。</li>
</ol>
<hr>
<h3 id="第二步修改-testbench-测试平台">第二步：修改 Testbench (测试平台)</h3>
<p>你需要对原来的 Testbench 做一点点修改，让它能加载延迟文件（如果你只做逻辑验证，不关心延迟，可以跳过 <code>initial</code> 块里的代码）。</p>
<p>打开你的 <code>tb_adder_32.v</code>，加入以下内容：</p>
<p>Verilog</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">module</span> <span class="n">tb_adder_32</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">//</span> <span class="o">...</span> <span class="err">你的信号定义</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">//</span> <span class="err">实例化你的设计</span> <span class="p">(</span><span class="err">注意：这里实例化的是</span> <span class="n">DC</span> <span class="err">生成的网表模块名</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">adder_32</span> <span class="n">u_adder_32</span> <span class="p">(</span> <span class="o">...</span> <span class="p">);</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">initial</span> <span class="n">begin</span>
</span></span><span class="line"><span class="cl">        <span class="o">//</span> <span class="err">【关键】加载波形记录功能</span> <span class="p">(</span><span class="err">为了给</span> <span class="n">Verdi</span> <span class="err">看</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">$</span><span class="n">fsdbDumpfile</span><span class="p">(</span><span class="s2">&#34;adder_post_sim.fsdb&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">$</span><span class="n">fsdbDumpvars</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tb_adder_32</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="o">//</span> <span class="err">【关键】反标</span> <span class="n">SDF</span> <span class="err">延迟文件</span> <span class="p">(</span><span class="err">如果要看真实延迟</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">//</span> <span class="err">第一个参数是</span><span class="n">sdf文件路径</span><span class="err">，第二个是</span><span class="n">Testbench里例化的DUT名字</span>
</span></span><span class="line"><span class="cl">        <span class="o">$</span><span class="n">sdf_annotate</span><span class="p">(</span><span class="s2">&#34;adder_32.sdf&#34;</span><span class="p">,</span> <span class="n">u_adder_32</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="n">end</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">    <span class="o">//</span> <span class="o">...</span> <span class="err">你的测试激励</span> <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="n">endmodule</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h3 id="第三步运行-vcs-仿真-核心步骤">第三步：运行 VCS 仿真 (核心步骤)</h3>
<p>这是最关键的一步。你需要告诉 VCS：我要仿真网表、我的 Testbench、以及​<strong>厂家给的门电路仿真模型</strong>。</p>
<p>在终端中输入以下命令（假设你在当前目录下）：</p>
<p>Bash</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">vcs -R -full64 -debug_access+all \
</span></span><span class="line"><span class="cl">    tb_adder_32.v \
</span></span><span class="line"><span class="cl">    adder_32_netlist.v \
</span></span><span class="line"><span class="cl">    -v /你的库文件路径/verilog/tsmc13.v \
</span></span><span class="line"><span class="cl">    +neg_tchk +maxdelays
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>命令详解 (必须看)：</strong></p>
<ul>
<li>​<code>-R</code>: 编译后立即运行。</li>
<li>​<code>-full64</code>: 使用 64 位模式。</li>
<li>​<code>-debug_access+all</code>​: 开启调试模式，​<strong>否则无法生成 fsdb 波形给 Verdi 看</strong>。</li>
<li>​<code>tb_adder_32.v</code>: 你的测试平台。</li>
<li>​<code>adder_32_netlist.v</code>: DC 吐出来的网表。</li>
<li>​ <strong>​<code>-v /.../verilog/tsmc13.v</code>​</strong>​: <strong>这是最重要的！</strong>  网表里全是 <code>XOR2X1</code>​ 这种名字，VCS 不认识，必须指向你截图里的那个 <code>tsmc13.v</code> 文件，它里面定义了这些门的逻辑行为。</li>
<li>​<code>+neg_tchk</code>: 后仿常见选项，防止因负的时间检查导致仿真报错。</li>
</ul>
<hr>
<h3 id="第四步使用-verdi-查看波形">第四步：使用 Verdi 查看波形</h3>
<p>如果 VCS 运行成功，你会看到终端打印出仿真时间，并且目录下会生成一个 <code>adder_post_sim.fsdb</code> 文件。</p>
<p>现在打开 Verdi 来看波形和电路图：</p>
<p><strong>方法 1：直接加载波形</strong></p>
<p>Bash</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">verdi -ssf adder_post_sim.fsdb &amp;
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>方法 2：加载设计和波形 (推荐，可以看门级电路图)</strong></p>
<p>Bash</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">verdi -sv tb_adder_32.v adder_32_netlist.v -v /你的库文件路径/verilog/tsmc13.v -ssf adder_post_sim.fsdb &amp;
</span></span></code></pre></td></tr></table>
</div>
</div><p>打开后：</p>
<ol>
<li>按 <code>g</code> 键（Get Signals）把信号拉出来。</li>
<li>你会发现波形不再是完美的方形，信号变化会有微小的​<strong>延迟</strong>（如果你加载了 SDF），这就是后仿真的意义！</li>
<li>你可以双击代码窗口里的模块，查看 DC 综合出来的真实门电路连接图（不再是 RTL 代码，而是 Schematic）。</li>
</ol>
<h3 id="总结-1">总结</h3>
<ol>
<li><strong>DC</strong> -&gt; 吐出 <code>netlist.v</code>​ 和 <code>.sdf</code>。</li>
<li><strong>Testbench</strong> -&gt; 加 <code>$sdf_annotate</code>​ 和 <code>$fsdbDump</code>。</li>
<li><strong>VCS</strong> -&gt; 编译 <code>TB + Netlist + tsmc13.v</code>。</li>
<li><strong>Verdi</strong> -&gt; 看 <code>.fsdb</code> 波形。</li>
</ol>
&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></li>
<li id="fn:3">
<h1 id="dc修改">DC修改</h1>
<p>这三个文件正好代表了 Design Compiler (DC) 工作的  <strong>“指挥”、“规则”和“记录”</strong>  三个核心层面。对于你的 32 位乘法器设计，理解这三个文件的关系非常关键。</p>
<p>以下是详细的通俗解释：</p>
<h3 id="1-runtcl--总指挥-flow-script">1. <code>run.tcl</code> —— 总指挥 (Flow Script)</h3>
<p>这是你需要“喂”给 DC 的​<strong>主脚本</strong>。它告诉 DC 按什么顺序干活。</p>
<ul>
<li>
<p><strong>作用：</strong>  自动化整个综合流程。你不需要一行行敲命令，运行这个脚本，DC 就会自动做完所有事。</p>
</li>
<li>
<p><strong>代码解读：</strong></p>
<ul>
<li>​<code>read_db sc_max.db</code>​: ​<strong>准备工具</strong>。读取工艺库（比如你的 SMIC .18 库）。</li>
<li>​<code>read_verilog my_design.v</code>​: ​<strong>读取图纸</strong>。读入你的 Verilog 代码。</li>
<li>​<code>source ... lab4.con</code>​: ​<strong>读取规则</strong>。加载下面的约束文件，告诉 DC 你的性能要求。</li>
<li>​<code>write_script ... lab4.wscr</code>​: ​<strong>保存现场</strong>​。把当前 DC 理解的所有设置保存成一个新脚本（即下面的 <code>lab4.wscr</code>）。</li>
<li>​<code>write -format ddc ...</code>​: ​<strong>保存结果</strong>​。保存综合后的数据库文件 (<code>.ddc</code>)。</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>对你的意义：</strong>  你需要编写一个类似的脚本（或者修改这个），把里面的 <code>my_design.v</code>​ 改成你的 <code>mult32.v</code>，把库文件改成你的 SMIC 库路径。</p>
</blockquote>
<h3 id="2-lab4con--规则书-constraints-file">2. <code>lab4.con</code> —— 规则书 (Constraints File)</h3>
<p>这是<strong>最重要</strong>的文件，通常由设计师（你）亲手编写。它定义了电路必须满足的“KPI 指标”。</p>
<ul>
<li>
<p><strong>作用：</strong>  告诉 DC：“我要跑多快（频率）”、“输入信号来得有多晚”、“输出信号要送多远”。</p>
</li>
<li>
<p><strong>代码解读：</strong></p>
<ul>
<li>​<code>create_clock -period 3.0 [get_ports clk]</code>​: <strong>时钟定义</strong> 。定义时钟周期为 3.0ns（即 333MHz）。对于你的组合逻辑乘法器，这里主要用于设定虚拟时钟来限制最大延迟。</li>
<li>​<code>set_clock_uncertainty ...</code>​: <strong>时钟抖动</strong> 。预留一些时间余量给时钟的不稳定性（Jitter）。</li>
<li>​<code>set_input_delay ...</code>​: <strong>输入延时</strong> 。告诉 DC 外部信号不是立刻到的，比如 <code>data*</code> 端口信号会在时钟沿后 0.45ns 才到达。</li>
<li>​<code>set_output_delay ...</code>​: <strong>输出延时</strong> 。告诉 DC 输出信号必须在下一级电路需要之前多久准备好。</li>
<li>​<code>set_max_area 540</code>​: <strong>面积约束</strong> 。限制电路的最大面积不能超过 540 个单位。</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>对你的意义：</strong>  你的 32 位乘法器是一个纯组合逻辑（假设没有流水线），你需要用 <code>set_max_delay</code>​ 或者定义一个虚拟时钟 (<code>create_clock -period ...</code>​) 配合 <code>set_input/output_delay</code> 来限制从 A/B 到 P 的运算时间。</p>
</blockquote>
<h3 id="3-lab4wscr--现场记录-write-script--echo-script">3. <code>lab4.wscr</code> —— 现场记录 (Write Script / Echo Script)</h3>
<p>这是一个<strong>由 DC 自动生成</strong>的文件（在 <code>run.tcl</code>​ 里由 <code>write_script</code>​ 命令生成），通常​<strong>不需要你写</strong>。</p>
<ul>
<li>
<p><strong>作用：</strong>  它是 DC “消化”完你的约束（<code>lab4.con</code>​）后，吐出来的“理解报告”。它把所有的通配符（比如 <code>data*</code>​）都展开成了具体的每一根线（比如 <code>data1[4]</code>​, <code>data1[3]</code>&hellip;）。</p>
</li>
<li>
<p><strong>为什么不一样？</strong></p>
<ul>
<li>​<code>lab4.con</code>​ 是给人写的，为了方便用了 <code>data*</code> 这种简写。</li>
<li>​<code>lab4.wscr</code>​ 是机器生成的，它必须精确到每一位，所以看起来非常啰嗦，列出了 <code>Cin2[2]</code>​ 、<code>out3[4]</code>  等所有端口的具体约束。</li>
</ul>
</li>
<li>
<p><strong>用途：</strong>  主要用于​<strong>调试</strong>。如果你发现综合结果不对，可以打开这个文件，看看 DC 是否真的把约束加到了每一根线上。</p>
</li>
</ul>
<blockquote>
<p><strong>对你的意义：</strong>  暂时忽略它。你只需要关注如何写好 <code>.con</code>​ 文件，<code>.wscr</code> 只是一个结果验证文件。</p>
</blockquote>
<hr>
<h3 id="总结你的-32-位乘法器该怎么用这三个文件">总结：你的 32 位乘法器该怎么用这三个文件？</h3>
<ol>
<li>
<p><strong>复制并修改</strong> <strong>​<code>run.tcl</code>​</strong>​ <strong>：</strong></p>
<ul>
<li>把 <code>read_verilog</code> 后面的文件换成你的乘法器代码。</li>
<li>把 <code>source</code> 后面的文件换成你新建的约束文件。</li>
</ul>
</li>
<li>
<p><strong>参考</strong> <strong>​<code>lab4.con</code>​</strong>​ <strong>编写</strong> <strong>​<code>mult32.con</code>​</strong>​ <strong>：</strong></p>
<ul>
<li>这是你需要花精力的地方。</li>
<li>对于组合逻辑乘法器，你的 <code>.con</code>​ 文件可以写得比 <code>lab4.con</code> 简单：</li>
</ul>
</li>
</ol>
<p>‍</p>
<p>‍</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tcl" data-lang="tcl"><span class="line"><span class="cl"><span class="c"># 定义一个虚拟时钟，假设我们要跑 100MHz (10ns)
</span></span></span><span class="line"><span class="cl"><span class="nv">create_clock</span> <span class="o">-</span>period <span class="mi">10</span> <span class="o">-</span>name v_clk
</span></span><span class="line"><span class="cl"><span class="c"># 设定输入输出延迟，强迫 DC 优化路径
</span></span></span><span class="line"><span class="cl"><span class="nv">set_input_delay</span> <span class="o">-</span>max <span class="mi">0</span> <span class="o">-</span>clock v_clk <span class="k">[</span><span class="nv">all_inputs</span><span class="k">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">set_output_delay</span> <span class="o">-</span>max <span class="mi">0</span> <span class="o">-</span>clock v_clk <span class="k">[</span><span class="nv">all_outputs</span><span class="k">]</span>
</span></span><span class="line"><span class="cl"><span class="c"># 或者直接用组合逻辑最大延迟约束
</span></span></span><span class="line"><span class="cl"><span class="nv">set_max_delay</span> <span class="mi">10</span> <span class="o">-</span>from <span class="k">[</span><span class="nv">all_inputs</span><span class="k">]</span> <span class="o">-</span>to <span class="k">[</span><span class="nv">all_outputs</span><span class="k">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li><strong>运行：</strong>  在 DC 命令行输入 <code>source run.tcl</code>，然后坐等结果。</li>
</ol>
&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></li>
<li id="fn:4">
<h1 id="virtuoso加电源">virtuoso加电源</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">procedure<span class="o">(</span> LOL_Run_Wire_Stub_Fix<span class="o">(</span> libName <span class="o">)</span>
</span></span><span class="line"><span class="cl">    let<span class="o">(</span> <span class="o">(</span>lib cv mPt pt stubPt line netName<span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="nv">lib</span> <span class="o">=</span> ddGetObj<span class="o">(</span> libName <span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="o">(</span> lib <span class="k">then</span>
</span></span><span class="line"><span class="cl">            printf<span class="o">(</span> <span class="s2">&#34;--- Processing Library: %s ---\n&#34;</span> libName <span class="o">)</span>
</span></span><span class="line"><span class="cl">            foreach<span class="o">(</span> cell lib~&gt;cells
</span></span><span class="line"><span class="cl">                <span class="p">;</span> Try to open schematic
</span></span><span class="line"><span class="cl">                <span class="nv">cv</span> <span class="o">=</span> dbOpenCellViewByType<span class="o">(</span> libName cell~&gt;name <span class="s2">&#34;schematic&#34;</span> <span class="s2">&#34;&#34;</span> <span class="s2">&#34;a&#34;</span> <span class="o">)</span>
</span></span><span class="line"><span class="cl">                    
</span></span><span class="line"><span class="cl">                when<span class="o">(</span> cv
</span></span><span class="line"><span class="cl">                    printf<span class="o">(</span> <span class="s2">&#34;  &gt; Fixing: %s\n&#34;</span> cell~&gt;name <span class="o">)</span>
</span></span><span class="line"><span class="cl">                        
</span></span><span class="line"><span class="cl">                    foreach<span class="o">(</span> inst cv~&gt;instances
</span></span><span class="line"><span class="cl">                        foreach<span class="o">(</span> iTerm inst~&gt;instTerms
</span></span><span class="line"><span class="cl">                            <span class="p">;</span> Filter <span class="k">for</span> vdd or gnd pins
</span></span><span class="line"><span class="cl">                            when<span class="o">(</span> member<span class="o">(</span> iTerm~&gt;name <span class="err">&#39;</span><span class="o">(</span><span class="s2">&#34;vdd&#34;</span> <span class="s2">&#34;gnd&#34;</span><span class="o">)</span> <span class="o">)</span>
</span></span><span class="line"><span class="cl">                                foreach<span class="o">(</span> pin iTerm~&gt;term~&gt;pins
</span></span><span class="line"><span class="cl">                                    foreach<span class="o">(</span> fig pin~&gt;figs
</span></span><span class="line"><span class="cl">                                        <span class="p">;</span> 1. Calculate Coordinate
</span></span><span class="line"><span class="cl">                                        <span class="nv">mPt</span> <span class="o">=</span> centerBox<span class="o">(</span> fig~&gt;bBox <span class="o">)</span>
</span></span><span class="line"><span class="cl">                                        <span class="nv">pt</span> <span class="o">=</span> dbTransformPoint<span class="o">(</span> mPt inst~&gt;transform <span class="o">)</span>
</span></span><span class="line"><span class="cl">                                            
</span></span><span class="line"><span class="cl">                                        <span class="p">;</span> 2. Define Direction
</span></span><span class="line"><span class="cl">                                        <span class="k">if</span><span class="o">(</span> iTerm~&gt;name <span class="o">==</span> <span class="s2">&#34;vdd&#34;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">                                            <span class="nv">netName</span> <span class="o">=</span> <span class="s2">&#34;vdd!&#34;</span>
</span></span><span class="line"><span class="cl">                                            <span class="nv">stubPt</span> <span class="o">=</span> list<span class="o">(</span> car<span class="o">(</span>pt<span class="o">)</span> cadr<span class="o">(</span>pt<span class="o">)</span>+0.15 <span class="o">)</span>
</span></span><span class="line"><span class="cl">                                        <span class="k">else</span>
</span></span><span class="line"><span class="cl">                                            <span class="nv">netName</span> <span class="o">=</span> <span class="s2">&#34;gnd!&#34;</span>
</span></span><span class="line"><span class="cl">                                            <span class="nv">stubPt</span> <span class="o">=</span> list<span class="o">(</span> car<span class="o">(</span>pt<span class="o">)</span> cadr<span class="o">(</span>pt<span class="o">)</span>-0.15 <span class="o">)</span>
</span></span><span class="line"><span class="cl">                                        <span class="o">)</span>
</span></span><span class="line"><span class="cl">                                            
</span></span><span class="line"><span class="cl">                                        <span class="p">;</span> 3. Draw Wire Stub <span class="o">(</span>Layer: wire drawing<span class="o">)</span>
</span></span><span class="line"><span class="cl">                                        <span class="nv">line</span> <span class="o">=</span> dbCreateLine<span class="o">(</span> cv list<span class="o">(</span><span class="s2">&#34;wire&#34;</span> <span class="s2">&#34;drawing&#34;</span><span class="o">)</span> list<span class="o">(</span>pt stubPt<span class="o">)</span> <span class="o">)</span>
</span></span><span class="line"><span class="cl">                                            
</span></span><span class="line"><span class="cl">                                        <span class="p">;</span> 4. Add Label to Wire
</span></span><span class="line"><span class="cl">                                        when<span class="o">(</span> line
</span></span><span class="line"><span class="cl">                                            schCreateWireLabel<span class="o">(</span> cv line stubPt netName <span class="s2">&#34;centerCenter&#34;</span> <span class="s2">&#34;R0&#34;</span> <span class="s2">&#34;stick&#34;</span> 0.05 nil <span class="o">)</span>
</span></span><span class="line"><span class="cl">                                        <span class="o">)</span>
</span></span><span class="line"><span class="cl">                                    <span class="o">)</span>
</span></span><span class="line"><span class="cl">                                <span class="o">)</span>
</span></span><span class="line"><span class="cl">                            <span class="o">)</span>
</span></span><span class="line"><span class="cl">                        <span class="o">)</span>
</span></span><span class="line"><span class="cl">                    <span class="o">)</span>
</span></span><span class="line"><span class="cl">                        
</span></span><span class="line"><span class="cl">                    <span class="p">;</span> Finalize
</span></span><span class="line"><span class="cl">                    schCheck<span class="o">(</span> cv <span class="o">)</span>
</span></span><span class="line"><span class="cl">                    dbSave<span class="o">(</span> cv <span class="o">)</span>
</span></span><span class="line"><span class="cl">                    dbClose<span class="o">(</span> cv <span class="o">)</span>
</span></span><span class="line"><span class="cl">                <span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="o">)</span>
</span></span><span class="line"><span class="cl">            printf<span class="o">(</span> <span class="s2">&#34;--- SUCCESS: All schematics updated ---\n&#34;</span> <span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span>
</span></span><span class="line"><span class="cl">            printf<span class="o">(</span> <span class="s2">&#34;ERROR: Library %s not found!\n&#34;</span> libName <span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‍</p>
<p>‍</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">load<span class="o">(</span> <span class="s2">&#34;/root/Desktop/fix_final.il&#34;</span> <span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‍</p>
<p>‍</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">LOL_Run_Wire_Stub_Fix<span class="o">(</span> <span class="s2">&#34;freepdk45_cellsBARK&#34;</span> <span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div>&#160;<a href="#fnref:4" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></li>
<li id="fn:5">
<h1 id="仿真配置">仿真配置</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-tcl" data-lang="tcl"><span class="line"><span class="cl"><span class="nv">vcs</span> <span class="o">-</span>R <span class="o">-</span>full64 <span class="o">-</span>debug_access<span class="o">+</span>all <span class="err">\</span>
</span></span><span class="line"><span class="cl">    <span class="nv">tb_mult.v</span> <span class="err">\</span>
</span></span><span class="line"><span class="cl">    <span class="nv">signed_vedic_mult_32bit_netlist.v</span> <span class="err">\</span>
</span></span><span class="line"><span class="cl">    <span class="nv">-v</span> <span class="o">/</span>home<span class="o">/</span>ICer<span class="o">/</span>EDA<span class="o">/</span>verilog<span class="o">/</span>tsmc13.v <span class="err">\</span>
</span></span><span class="line"><span class="cl">    <span class="o">+</span><span class="nv">neg_tchk</span> <span class="o">+</span>maxdelays
</span></span></code></pre></td></tr></table>
</div>
</div><p>‍</p>
<p>‍</p>
<p>‍</p>
<p>‍</p>
<p>‍</p>
<p>‍</p>
<p>‍</p>
<p>‍</p>
<p>‍</p>
<p>‍</p>
<p>‍</p>
<p>‍</p>
<p>‍</p>
<p>‍</p>
<p>‍</p>
<p>‍</p>
<h3 id="-关于-fatal-error-loading-environment-variables">. 关于 &ldquo;Fatal: Error loading environment variables&hellip;&rdquo;</h3>
<p>你 Log 的最后出现了这个严重错误：</p>
<p>‍</p>
<p>‍</p>
<p>‍</p>
<p>驱动能力  5V</p>
<p>‍</p>
<p>‍</p>
<p>Plaintext</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">Fatal</span><span class="p">:</span> <span class="n">Error</span> <span class="n">loading</span> <span class="n">environment</span> <span class="n">variables</span> <span class="n">from</span> <span class="n">environment</span> <span class="n">file</span><span class="o">.</span>
</span></span><span class="line"><span class="cl"><span class="n">Terminating</span> <span class="n">execution</span><span class="o">.</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>这意味着你的仿真环境配置（AMS Designer）挂了。</strong></p>
<ul>
<li>
<p>​<strong>影响</strong>​：如果你只是画图、跑 LVS/DRC，这可能暂时不影响你使用。但如果你要进行 ​<strong>数模混合仿真 (AMS Simulation)</strong> ，工具会无法启动。</p>
</li>
<li>
<p>​<strong>原因</strong>​：通常是因为你的 Linux 环境变量配置有问题，或者工程目录下的 <code>.cdsinit</code>​ / <code>ams.env</code> 文件里指向的路径不对。</p>
</li>
<li>
<p>​<strong>建议</strong>：</p>
<ul>
<li>如果 Virtuoso 没有闪退，可以先忽略它，专注解决上面的黄色框问题。</li>
<li>如果后续跑仿真报错，建议联系实验室负责服务器的同学，检查一下 <code>AMS_DIR</code> 或相关的环境变量设置</li>
</ul>
</li>
</ul>
&#160;<a href="#fnref:5" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></li>
<li id="fn:6">
<h1 id="总结配置">总结配置</h1>
<ol>
<li>DC用sdl</li>
<li>需要配置symbol（没的话仿真不了）和schematic（重要）</li>
<li>网表要对应</li>
<li>模型库<sup id="fnref:11"><a href="#fn:11" class="footnote-ref" role="doc-noteref">11</a></sup></li>
</ol>
<p>‍</p>
<p>‍&#160;<a href="#fnref:6" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:7">
<h1 id="vcs-仿真命令">VCS 仿真命令</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vcs -R -full64 <span class="se">\
</span></span></span><span class="line"><span class="cl">  -debug_acc+all -debug_region+cell+encrypt <span class="se">\
</span></span></span><span class="line"><span class="cl">  -timescale<span class="o">=</span>1ns/1ps <span class="se">\
</span></span></span><span class="line"><span class="cl">  +v2k <span class="se">\
</span></span></span><span class="line"><span class="cl">  tsmc13.v <span class="se">\
</span></span></span><span class="line"><span class="cl">  signed_vedic_mult_32bit_netlist.v <span class="se">\
</span></span></span><span class="line"><span class="cl">  signed_vedic_mult_32bit_tb.v <span class="se">\
</span></span></span><span class="line"><span class="cl">  -l func_sim.log
</span></span></code></pre></td></tr></table>
</div>
</div><p>‍</p>
<p>dve -vpd inter.vpd</p>
<p><em>注意</em>：这次运行后，你应该会看到生成了一个稍微大一点的 <code>inter.vpd</code>​ 或 <code>vcdplus.vpd</code> 文件。</p>
<p>vcdplus.vpd</p>
<p>dve -vcdplus.vpd</p>
<p>‍</p>
<p>./simv -gui &amp;</p>
<p>run</p>
<p>‍</p>
<p>如果你做后端或验证，通常会用 Verdi 来查看网表，它的原理图追踪功能比 Design Vision 强大得多。</p>
<p>看图</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">verdi -sv signed_vedic_mult_32bit_netlist.v tsmc13.v <span class="p">&amp;</span>
</span></span></code></pre></td></tr></table>
</div>
</div>&#160;<a href="#fnref:7" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></li>
<li id="fn:8">
<h1 id="数字全流程虚拟机">数字全流程虚拟机</h1>
<p>这是一个非常“豪华”且专业的IC设计环境（通常被称为EDA虚拟机），几乎涵盖了数字IC设计（前端、后端）、模拟IC设计以及FPGA开发的整个全流程工具。</p>
<p>对于你的微电子科学与工程专业背景，这个环境非常适合学习和做项目。</p>
<p>以下是根据你提供的目录截图整理的工具清单及其作用，以及关于替代ModelSim的回答：</p>
<h3 id="1-能替代-modelsim-的数字仿真工具">1. 能替代 ModelSim 的数字仿真工具</h3>
<p>你问有没有能替代 ModelSim 的工具，<strong>答案是：有，而且更强大、更符合工业界标准。</strong></p>
<p>在这个虚拟机中，你有<strong>三个</strong>顶级的工业级仿真器，它们在性能和功能上都超越了普通的 ModelSim：</p>
<ul>
<li>
<p>​<strong>​<code>vcs</code>​</strong>​  <strong>(Synopsys VCS):</strong></p>
<ul>
<li><strong>地位：</strong>  业界最主流的数字逻辑仿真器之一（通常与 Verdi 配合使用）。</li>
<li><strong>特点：</strong>  它是编译型仿真器（Compile-based），速度比 ModelSim（解释型）快得多，尤其是在大规模设计时。</li>
<li><strong>用法：</strong>  配合 <strong>Verdi</strong> 查看波形是数字IC设计工程师的标准工作流（不再是像 ModelSim 那样看自带的波形窗口）。</li>
</ul>
</li>
<li>
<p>​<strong>​<code>questasim</code>​</strong>​  <strong>(Mentor Questasim):</strong></p>
<ul>
<li><strong>地位：</strong>  它是 ModelSim 的“大哥”或“高级版”。</li>
<li><strong>特点：</strong>  界面和操作逻辑与 ModelSim 几乎一模一样，但支持更多的高级验证特性（如 SystemVerilog 断言、UVM 方法学等），且仿真速度更快。如果你习惯了 ModelSim，上手这个是零门槛的。</li>
</ul>
</li>
<li>
<p>​<strong>​<code>INCISIVE</code>​</strong>​  <strong>(Cadence Incisive / IES):</strong></p>
<ul>
<li><strong>地位：</strong>  Cadence 家的数字仿真平台（命令通常是 <code>ncsim</code>​ 或 <code>irun</code>）。</li>
<li><strong>特点：</strong>  同样是工业级强力仿真工具，常用于混合信号仿真（配合 Virtuoso）。</li>
</ul>
</li>
</ul>
<p><strong>建议：</strong>  作为微电子专业的学生，建议你<strong>尽早开始学习使用</strong> <strong>​<code>VCS + Verdi</code>​</strong> 的组合，这是目前数字后端和验证岗位最核心的技能之一。</p>
<hr>
<h3 id="2-虚拟机内其他工具详细介绍">2. 虚拟机内其他工具详细介绍</h3>
<p>我们将这些工具按照厂商和用途分类：</p>
<h4 id="a-synopsys-系列-数字ic设计的核心力量"><strong>A. Synopsys 系列 (数字IC设计的核心力量)</strong></h4>
<p>截图路径：<code>synopsys</code> 目录下</p>
<ul>
<li>​<strong>​<code>vcs</code>​</strong>​  <strong>/</strong>  <strong>​<code>vcs-mx</code>​</strong>​ <strong>:</strong>  数字逻辑仿真器（前面已提）。</li>
<li>​<strong>​<code>verdi</code>​</strong>​ <strong>:</strong>  ​<strong>最强大的波形查看与调试工具</strong>。它不产生波形，而是读取 VCS 跑出来的波形文件（.fsdb），用于追踪信号、查看原理图逻辑，是数字工程师每天都要用的神器。</li>
<li>​<strong>​<code>syn</code>​</strong>​  <strong>(Design Compiler - DC):</strong>  ​<strong>逻辑综合工具</strong>。将你写的 Verilog RTL 代码转换成门级网表（Gate-level Netlist）。这是数字前端设计最重要的工具。</li>
<li>​<strong>​<code>icc2</code>​</strong>​  <strong>(IC Compiler II):</strong>  ​<strong>数字后端布局布线工具 (P&amp;R)</strong> 。用于将综合后的网表变成实际的版图（Layout）。</li>
<li>​<strong>​<code>pts</code>​</strong>​  <strong>(PrimeTime - PT):</strong>  ​<strong>静态时序分析工具 (STA)</strong> 。用于检查芯片能否在指定频率下稳定工作，是Sign-off（签核）的金标准。</li>
<li>​<strong>​<code>SpyGlass</code>​</strong>​ <strong>:</strong>  ​<strong>RTL 检查工具</strong>。用于在综合之前检查你的代码风格、跨时钟域（CDC）问题等，防止低级错误。</li>
<li>​<strong>​<code>lc</code>​</strong>​  <strong>(Library Compiler):</strong>  库文件处理工具，用于将 .lib 转为 .db 格式供 DC 使用。</li>
</ul>
<h4 id="b-cadence-系列-模拟数模混合设计霸主"><strong>B. Cadence 系列 (模拟/数模混合设计霸主)</strong></h4>
<p>截图路径：<code>cadence</code> 目录下</p>
<ul>
<li>​<strong>​<code>IC617</code>​</strong>​  <strong>(Virtuoso):</strong>  ​<strong>模拟/混合信号版图与原理图设计工具</strong>。画 MOS 管、画版图、做 DRC/LVS 都要用到它。微电子学生应该非常熟悉这个界面。</li>
<li>​<strong>​<code>MMSIM151</code>​</strong>​  <strong>(Spectre):</strong>  ​<strong>模拟电路仿真器</strong>。在 Virtuoso 里跑仿真（AC/DC/Tran）时，后台调用的就是它。</li>
<li>​<strong>​<code>INCISIVE152</code>​</strong>​ <strong>:</strong>  数字仿真平台（前面已提）。</li>
</ul>
<h4 id="c-mentor-现-siemens-eda-系列"><strong>C. Mentor (现 Siemens EDA) 系列</strong></h4>
<p>截图路径：<code>mentor</code> 目录下</p>
<ul>
<li>​<strong>​<code>Calibre2015</code>​</strong>​ <strong>:</strong>  ​<strong>物理验证金标准</strong>。用于做 DRC（设计规则检查）、LVS（版图原理图一致性检查）和 PEX（寄生参数提取）。在 Virtuoso 画完版图后，必须用 Calibre 跑一遍才算完成。</li>
<li>​<strong>​<code>questasim</code>​</strong>​ <strong>:</strong>  高级数字仿真器（前面已提）。</li>
</ul>
<h4 id="d-xilinx-系列-fpga-开发"><strong>D. Xilinx 系列 (FPGA 开发)</strong></h4>
<p>截图路径：<code>Xilinx</code> 目录下</p>
<ul>
<li>​<strong>​<code>Vivado 2019.1</code>​</strong>​ <strong>:</strong>  Xilinx 的 FPGA 集成开发环境。包含综合、布局布线和仿真。</li>
<li>​<strong>​<code>SDK</code>​</strong>​ <strong>:</strong>  嵌入式软件开发工具（通常用于 Zynq 系列里的 ARM 核开发）。</li>
</ul>
<h4 id="e-开源轻量级工具"><strong>E. 开源/轻量级工具</strong></h4>
<ul>
<li>​<strong>​<code>iverilog</code>​</strong>​  <strong>(Icarus Verilog):</strong>  开源的 Verilog 仿真器，轻量级，适合简单测试。</li>
<li>​<strong>​<code>gtkwave</code>​</strong>​ <strong>:</strong>  开源的波形查看器，通常配合 iverilog 使用。</li>
<li>​<strong>​<code>Riscv_Tools</code>​</strong>​ <strong>:</strong>  专门用于 RISC-V 处理器开发的工具链（编译器 gcc 等）。</li>
</ul>
<h3 id="总结">总结</h3>
<p>这个虚拟机环境非常完善：</p>
<ol>
<li><strong>做数字IC：</strong>  你有 VCS (仿真) + Verdi (调试) + DC (综合) + ICC2 (后端) + PrimeTime (时序)。</li>
<li><strong>做模拟IC：</strong>  你有 Virtuoso (设计) + Spectre (仿真) + Calibre (验证)。</li>
<li><strong>做FPGA：</strong>  你有 Vivado。</li>
</ol>
<p><strong>对于你的“替代 ModelSim”的需求，直接去</strong> <strong>​<code>synopsys</code>​</strong>​ <strong>目录下找</strong> <strong>​<code>vcs</code>​</strong>​ <strong>，或者在终端里配置好环境变量后尝试运行</strong> <strong>​<code>vcs</code>​</strong>​ <strong>或</strong> <strong>​<code>verdi</code>​</strong>​ <strong>即可。</strong>&#160;<a href="#fnref:8" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:9">
<h1 id="翻译加入">翻译加入</h1>
<p>要在 Virtuoso (IC617) 中使用这个库，你需要把它“挂载”到 Library Manager 中。</p>
<p>根据你提供的截图，你已经在 <code>osu_soc-master/cadence/lib/tsmc018</code> 路径下找到了库文件夹。</p>
<p>请按照以下步骤操作：</p>
<h3 id="第一步确认-linux-路径">第一步：确认 Linux 路径</h3>
<p>非常重要： 你的截图 显示的是 Windows 路径 (D:\Virtual_share&hellip;)。</p>
<p>Virtuoso 运行在 Linux 中，它读不到 D 盘。你需要找到这个“共享文件夹”在 Linux 里的挂载路径。</p>
<ul>
<li>通常是在 <code>/mnt/hgfs/Virtual_share/</code>​ 或者 <code>/media/sf_Virtual_share/</code> 下。</li>
<li>你需要定位到 Linux 下的这个文件夹：<code>.../osu_soc-master/cadence/lib/tsmc018/OSU_stdcells_tsmc018</code></li>
</ul>
<h3 id="第二步在-library-manager-中添加库">第二步：在 Library Manager 中添加库</h3>
<ol>
<li>
<p>打开 Virtuoso 的 <strong>Library Manager</strong> (库管理器)。</p>
</li>
<li>
<p>在顶部菜单栏点击 <strong>Edit</strong> -&gt; ​<strong>Library Path&hellip;</strong> 。</p>
</li>
<li>
<p>这会弹出一个表格编辑器。在最下面的一行空白处填写：</p>
<ul>
<li><strong>Library (库名):</strong>  <code>OSU_stdcells</code> (或者你自己喜欢的名字，只要记住就行)。</li>
<li><strong>Path (路径):</strong>  点击单元格里的浏览按钮，找到上面提到的 Linux 路径，选中 <code>OSU_stdcells_tsmc018</code> 这个文件夹。</li>
<li><em>(注意：要选那个文件夹本身，不要进去了)</em></li>
</ul>
</li>
<li>
<p>点击 <strong>File</strong> -&gt; <strong>Save</strong> (保存 <code>cds.lib</code>)，然后关闭编辑窗口。</p>
</li>
</ol>
<h3 id="第三步验证库是否有效">第三步：验证库是否有效</h3>
<ol>
<li>
<p>回到 Library Manager 主界面。</p>
</li>
<li>
<p>在左侧 Library 列表里，应该能看到你刚加的 <code>OSU_stdcells</code>。</p>
</li>
<li>
<p>​<strong>点击它</strong>，看中间的 Cell 列表：</p>
<ul>
<li><strong>情况 A (成功):</strong>  如果你看到全是 <code>AND2X1</code>​, <code>DFF</code>​, <code>INV</code> 等名字，恭喜你，挂载成功！</li>
<li><strong>情况 B (空库):</strong>  如果里面是空的，或者 Virtuoso 报错说格式不对（OpenAccess版本问题），说明这个文件夹里的数据是旧版格式或者只是个空壳。<strong>如果遇到这种情况，请看下面的“Plan B”。</strong></li>
</ul>
</li>
</ol>
<hr>
<h3 id="第四步回到-verilog-in-界面-解决你的最初问题">第四步：回到 Verilog In 界面 (解决你的最初问题)</h3>
<p>一旦第三步确认成功，你就可以回到“Verilog In”导入界面 进行修改了：</p>
<ol>
<li><strong>Target Library Name:</strong>  建议填 <code>my_design</code> (你自己新建的库)。</li>
<li>Reference Libraries: 这里填写：<br>
OSU_stdcells basic analogLib<br>
(注意：OSU_stdcells 必须和你第二步里起的 Library 名字一模一样)</li>
</ol>
<hr>
<h3 id="plan-b如果直接挂载全是空的-使用-gds-导入">Plan B：如果直接挂载全是空的 (使用 GDS 导入)</h3>
<p>OSU 的这个包有时候库文件不完整，但它一定提供了 <strong>GDSII</strong> 版图文件。如果上面的方法不行，请用这个方法“重建”库：</p>
<ol>
<li>
<p><strong>新建库：</strong>  Library Manager -&gt; File -&gt; New -&gt; Library。</p>
<ul>
<li>名字：<code>OSU_stdcells</code>。</li>
<li>Technology File: 选择 <code>Attach to an existing technology library</code>​ -&gt; 选择 <code>NCSU_TechLib_tsmc02</code>​ (或者是 tsmc03，如果没有就选 <code>Do not need process info</code>)。</li>
</ul>
</li>
<li>
<p><strong>导入 GDS：</strong></p>
<ul>
<li>Virtuoso 主界面 -&gt; <strong>File</strong> -&gt; <strong>Import</strong> -&gt; ​<strong>Stream</strong>。</li>
<li><strong>Stream File:</strong>  浏览找到 <code>.../osu_soc-master/cadence/lib/tsmc018/osu018_stdcells.gds2</code>​ (这个文件通常在 <code>lib</code> 文件夹同级或里面)。</li>
<li><strong>Library:</strong>  选择刚才新建的 <code>OSU_stdcells</code>。</li>
<li>点击 ​<strong>Translate</strong>。</li>
</ul>
</li>
<li>
<p>这会自动把版图数据转换成 Virtuoso 的库。完成后，你再进行“第四步”即可。</p>
</li>
</ol>
&#160;<a href="#fnref:9" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></li>
<li id="fn:10">
<h1 id="转换库">转换库</h1>
<p>‍</p>
<p>终端不能在同一个开启</p>
<p>‍</p>
<p>这是一个非常典型的  <strong>“操作位置冲突”</strong>  错误。</p>
<p>简单来说：你正在  <strong>​<code>/root/Desktop/</code>​</strong> ​ 目录下运行转换工具，而你要修改的 <strong>​<code>cds.lib</code>​</strong>​ 文件也在这个目录下。<code>cdb2oa</code>​ 工具为了保护文件不被写坏，<strong>禁止</strong>在包含 <code>cds.lib</code> 的同一级目录下运行它自己。</p>
<h3 id="-解决方案换个地方运行命令">✅ 解决方案：换个地方运行命令</h3>
<p>你只需要退到其他目录（比如 <code>/tmp</code> 临时目录），然后“远程遥控”运行转换命令即可。</p>
<p>请​<strong>关闭 Virtuoso</strong>，打开终端 (Terminal)，严格按照以下 3 步操作：</p>
<h4 id="第一步进入临时目录">第一步：进入临时目录</h4>
<p>在终端输入：</p>
<p>Bash</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd /tmp
</span></span></code></pre></td></tr></table>
</div>
</div><p><em>(这一步是为了离开 Desktop 目录，避开那个报错)</em></p>
<h4 id="第二步运行转换命令">第二步：运行转换命令</h4>
<p>复制并运行下面这行命令（这是根据你报错日志生成的修正命令）：</p>
<p>Bash</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cdb2oa -lib OSU_CDB -cdslibpath /root/Desktop/cds.lib
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><strong>解释：</strong></p>
<ul>
<li>​<code>-lib OSU_CDB</code>：转换你刚才定义的那个旧版库。</li>
<li>​<code>-cdslibpath ...</code>：告诉工具去哪里找你的配置文件。</li>
</ul>
</li>
<li>
<p><strong>执行过程中：</strong>  屏幕可能会滚动很多日志，如果没有报错 <code>ERROR</code>​，并且最后显示 <code>cdb2oa</code> 结束，那就是成功了。</p>
</li>
</ul>
<h4 id="第三步重启-virtuoso-验证">第三步：重启 Virtuoso 验证</h4>
<ol>
<li>回到你的工作目录：</li>
<li>打开 ​<strong>Library Manager</strong>。</li>
<li>点击左侧的 <strong>​<code>OSU_CDB</code>​</strong> 库。</li>
<li><strong>关键时刻：</strong>  看中间的 <strong>Cell</strong> 列表（比如点 <code>AND2X1</code>​），现在右边的 <strong>View</strong> 列表里应该同时出现了 ​<strong>​<code>layout</code>​</strong>​, ​<strong>​<code>schematic</code>​</strong>​, 和 ​<strong>​<code>symbol</code>​</strong>！</li>
</ol>
<hr>
<h3 id="-最后一步重新导入网表-verilog-in">🚀 最后一步：重新导入网表 (Verilog In)</h3>
<p>一旦你在 Library Manager 里看到了 ​<strong>​<code>symbol</code>​</strong>，就说明你已经拿到了“拼图的说明书”。</p>
<ol>
<li>
<p>打开 ​<strong>File -&gt;</strong>  <strong>Import -&gt;</strong>  <strong>Verilog</strong>。</p>
</li>
<li>
<p><strong>Reference Libraries</strong> 必须修改为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">OSU_CDB basic analogLib
</span></span></code></pre></td></tr></table>
</div>
</div><p><em>(注意：一定要填刚才转换成功的库名</em> <em>​<code>OSU_CDB</code>​</em>​ <em>，不要再填那个只有 Layout 的</em> <em>​<code>OSU_stdcells</code>​</em>​ <em>了)</em></p>
</li>
<li>
<p>点击 ​<strong>OK</strong>。</p>
</li>
</ol>
<p>这次导入生成的 Schematic，必定是连线完整的电路图！&#160;<a href="#fnref:10" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:11">
<h1 id="模型库">模型库</h1>
<p>这是一个非常关键的发现。从你的截图来看，<code>tran_models</code>​ 在你的 Windows 系统里显示为一个​<strong>黄色文件夹</strong>​，这在标准的 FreePDK45 结构中是不太正常的（通常它应该是一个名为 <code>tran_models.sp</code>​ 的​<strong>文件</strong>）。</p>
<p>这很可能是解压或下载过程中产生的问题（例如多套了一层文件夹）。</p>
<p>请按照以下 3 步操作来修复：</p>
<h3 id="第一步点进这个文件夹看看">第一步：点进这个文件夹看看</h3>
<p>请双击打开截图中的这个 <code>tran_models</code>​ ​<strong>文件夹</strong>。</p>
<ul>
<li>​<strong>情况 A</strong>​：如果你在里面看到了一个叫 <code>tran_models.sp</code>​ 或者 <code>models.sp</code>​ 的文件，​<strong>那个才是真正的模型文件</strong>。</li>
<li>​<strong>情况 B</strong>：如果你点进去是空的，或者是乱码文件，那么可能是文件丢失了。</li>
</ul>
<p>通常正确的路径结构应该是：</p>
<p>&hellip;/ncsu_basekit/models/hspice/tran_models.sp (这是一个文本文件)</p>
<h3 id="第二步确认文件路径windows-vs-linux">第二步：确认文件路径（Windows vs Linux）</h3>
<p>由于你在跑 Spectre 仿真（这是 Linux 软件），而你的截图是 Windows 界面，说明你用了虚拟机共享文件夹（<code>Virtual_share</code>）。</p>
<p><strong>绝对不要</strong>在 Cadence 里面直接填 Windows 的路径（如 <code>D:\Virtual_share...</code>），Cadence 读不懂。</p>
<p>你需要找到这个文件在 ​<strong>Linux 系统里的对应路径</strong>。通常它长这样：</p>
<ul>
<li>​<code>/mnt/hgfs/Virtual_share/des_test/ncsu_basekit/models/hspice/tran_models/tran_models.sp</code></li>
<li>或者 <code>/home/你的用户名/Desktop/share/...</code></li>
</ul>
<h3 id="第三步在-ade-中加载正确的文件">第三步：在 ADE 中加载正确的文件</h3>
<ol>
<li>回到 Cadence ADE 的 <strong>Model Libraries</strong> 设置窗口。</li>
<li>点击 Browse（浏览），沿着 <strong>Linux 的挂载路径</strong> 找到那个真正的 <code>.sp</code> 文件。</li>
<li>加载后，<strong>Section</strong> 一栏​<strong>留空</strong>（不要填 tt）。</li>
</ol>
<p>如果你在文件夹里找不到 .sp 文件：</p>
<p>你可以直接退回到上一级目录 &hellip;/ncsu_basekit/models/hspice/，看看这一层有没有名为 hspice_nom.include 或者 tran_models.sp 的文件。如果有，直接用那个即可。</p>
<p><strong>一句话总结：</strong>  请点进那个黄色文件夹，找到里面的 <code>.sp</code> 文件，并在 Cadence 里通过 Linux 路径加载它。&#160;<a href="#fnref:11" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

    </div>

    
<footer class="post-footer">
      
      <nav class="post-nav">
        
        <a class="next" href="/post/hello-world/">
            <span class="next-text nav-default">我的第一篇博客</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/%e4%bd%a0%e7%9a%84ID" class="iconfont icon-github" title="github"></a>
  
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2026<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>








</body>
</html>
